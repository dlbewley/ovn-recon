{"id":"ovn-recon-3fi","title":"Add Gravity Value Badge to Graph Nodes","description":"Add a small, dimmed gravity value badge displayed on each graph node to visually indicate the gravity score used for sorting.\n\nImplementation details:\n- Display the gravity value as a small badge/number on each node\n- Style should be dimmed/subtle (low opacity, muted color) so it doesn't interfere with node readability\n- Should show the actual gravity score calculated for that node\n- This will help verify that gravity sorting enhancements are working correctly\n- Badge should be positioned appropriately (e.g., top-right corner or bottom of node)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T19:57:20.069704-08:00","created_by":"dale","updated_at":"2026-01-05T19:59:10.261279-08:00","closed_at":"2026-01-05T19:59:10.261279-08:00","close_reason":"Closed"}
{"id":"ovn-recon-6v5","title":"Fix incorrect YAML tab link for cluster-scoped resources","description":"When viewing a CUDN (ClusterUserDefinedNetwork) graph node in the drawer, the Links tab has properly functioning links, but the YAML tab's \"View Resource in Console\" link is incorrect.\n\n**Current Behavior:**\n- Links tab: Uses `getResourceLinks()` which correctly checks for namespace and uses `/k8s/cluster` for cluster-scoped resources\n- YAML tab: Hardcodes `/k8s/ns/${namespace || 'default'}` which incorrectly adds a namespace component for cluster-scoped resources like CUDN\n\n**Expected Behavior:**\n- YAML tab should use the same logic as Links tab: check if namespace exists\n  - If namespace exists: `/k8s/ns/${namespace}`\n  - If no namespace (cluster-scoped): `/k8s/cluster`\n\n**Technical Details:**\n- Issue location: `src/components/NodeVisualization.tsx` line 1198\n- Current code: `/k8s/ns/${activeNode.raw.metadata?.namespace || 'default'}/`\n- Should use same pattern as `getResourceLinks()` function (line 71-79) which correctly handles cluster-scoped resources\n- CUDN is a cluster-scoped resource and should not have `/ns/namespace/` in the URL path","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T15:30:14.739515-08:00","created_by":"dale","updated_at":"2026-01-07T15:32:20.254954-08:00","closed_at":"2026-01-07T15:32:20.254954-08:00","close_reason":"Closed","comments":[{"id":3,"issue_id":"ovn-recon-6v5","author":"dale","text":"✅ FIXED: Updated YAML tab link to use same logic as Links tab:\n- Uses resourceRef if available (most consistent approach)\n- Falls back to checking namespace: if namespace exists uses /k8s/ns/{namespace}, otherwise uses /k8s/cluster for cluster-scoped resources\n- Fixes incorrect /k8s/ns/default path for CUDN (cluster-scoped resource)\n- Code now matches getResourceLinks() pattern","created_at":"2026-01-07T23:32:19Z"}]}
{"id":"ovn-recon-9bs","title":"Improve Drawer UX: Overlay drawer and enable diagram pan/zoom","description":"When viewing the details of a graph node, the Drawer component slides out from the right and causes the diagram visualization to shrink. \n\n**Current Behavior:**\n- The Drawer uses `isInline` prop which causes the content area to resize when the drawer expands\n- The SVG diagram shrinks to accommodate the drawer panel\n- Users cannot pan or zoom the diagram\n- Tab selection resets to 'summary' when clicking between different nodes\n\n**Desired Behavior:**\n1. ✅ **COMPLETED**: The drawer should slide over the diagram without resizing it (overlay mode) - Removed `isInline` prop, drawer now overlays content\n2. ✅ **COMPLETED**: Persist the selected tab when clicking a new graph node - If viewing YAML tab of one node and clicking another node, drawer should default to YAML tab (preserves tab selection when switching nodes)\n3. ✅ **COMPLETED**: Enable user interaction for resizing and moving/panning the diagram - Implemented pan/zoom with mouse wheel (Ctrl/Cmd + scroll), shift + drag for panning, and zoom control buttons\n4. ✅ **COMPLETED**: Consider adding zoom functionality for better navigation of large diagrams - Added zoom in/out/reset buttons, zoom level display, and smooth zoom towards mouse position\n\n**Technical Details:**\n- Current implementation in `src/components/NodeVisualization.tsx` uses `Drawer` component (line 1105)\n- The SVG is rendered inside `DrawerContentBody` (line 1107)\n- Changed drawer behavior from inline to overlay by removing `isInline` prop\n- Added `position: relative` to CardBody for proper overlay positioning\n- Modified `handleNodeClick` to preserve tab selection when switching between nodes (only resets to 'summary' when drawer first opens)\n- Implemented custom pan/zoom solution using SVG viewBox manipulation:\n  - Added pan/zoom state management (viewBox, zoomLevel, isPanning)\n  - Mouse wheel zoom with Ctrl/Cmd + scroll (zooms towards mouse position)\n  - Shift + drag for panning (prevents panning when clicking on nodes)\n  - Zoom control buttons (zoom in, zoom out, reset)\n  - Zoom level display showing current zoom percentage\n  - Zoom range: 10% to 500%","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T14:22:08.35481-08:00","created_by":"dale","updated_at":"2026-01-07T15:20:58.649379-08:00","closed_at":"2026-01-07T15:20:58.649379-08:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"ovn-recon-9bs","author":"dale","text":"✅ Item 1 COMPLETED: Drawer now slides over diagram without resizing it. Removed `isInline` prop and added `position: relative` to CardBody for proper overlay positioning.","created_at":"2026-01-07T22:32:23Z"},{"id":2,"issue_id":"ovn-recon-9bs","author":"dale","text":"✅ Items 3 \u0026 4 COMPLETED: Implemented pan/zoom functionality:\n- Mouse wheel zoom (Ctrl/Cmd + scroll) with zoom towards mouse position\n- Shift + drag for panning (prevents panning when clicking nodes)\n- Zoom control buttons (zoom in/out/reset) with zoom level display\n- Zoom range: 10% to 500%\n- Custom implementation using SVG viewBox manipulation (no external dependencies)","created_at":"2026-01-07T22:42:09Z"}]}
{"id":"ovn-recon-cgg","title":"Improve metadata handling for graph nodes in drawer","description":"Improve the metadata display in the drawer for different graph node types to show more informative and consistent information.\n\n**Current Behavior:**\n- ✅ Drawer view has verbose resource name as subtitle (Desirable - already implemented)\n- ✅ Bridge Mappings graph node view has verbose subtitle \"OVN Bridge Mapping\" (Desirable - already implemented)\n- ❌ Graph nodes in Network and Attachments columns show verbose resource names like \"ClusterUserDefinedNetwork\" (NOT desirable - should show abbreviations)\n- ❌ Bridge Mapping drawer details view CUDN references are not hyperlinked (NOT desirable - should be clickable links)\n\n**Desired Behavior:**\n\n1. **Graph Node Display (in columns):**\n   - CUDN nodes should show \"CUDN\" abbreviation (not \"Localnet ClusterUserDefinedNetwork\")\n   - NAD nodes should show \"NAD\" abbreviation (not \"NetworkAttachmentDefinition\")\n   - Bridge Mapping nodes should show \"OVN Bridge Mapping\" (current behavior is correct)\n\n2. **Drawer Header Display:**\n   - CUDN nodes: Show \"{topology} ClusterUserDefinedNetwork\" as subtitle (already implemented)\n   - NAD nodes: Show \"NetworkAttachmentDefinition\" as subtitle (already implemented)\n   - Bridge Mapping nodes: Show \"OVN Bridge Mapping\" as subtitle (already implemented)\n\n3. **Bridge Mapping Details Tab:**\n   - CUDN references should be hyperlinks to view the CUDN resource details in the console\n   - Links should use the same pattern as other resource links (use resourceRef or construct URL)\n\n**Technical Details:**\n- Location: `src/components/NodeVisualization.tsx`\n- Graph node display uses `displayType` which is set from `viewNode.subtitle` (line ~1061)\n- Need to separate graph node display text from drawer subtitle\n- Bridge mapping details rendering is in `nodeKindRegistry['ovn-mapping'].renderDetails` (around line 125)\n- Need to add hyperlinks using `getResourceLinks` pattern or construct URLs for CUDN resources","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T15:57:55.90927-08:00","created_by":"dale","updated_at":"2026-01-07T16:12:55.09023-08:00","closed_at":"2026-01-07T16:12:55.09023-08:00","close_reason":"Closed","comments":[{"id":4,"issue_id":"ovn-recon-cgg","author":"dale","text":"✅ IMPLEMENTED: All metadata improvements completed:\n1. CUDN nodes: Subtitle now shows '{topology} ClusterUserDefinedNetwork' (e.g., 'Localnet ClusterUserDefinedNetwork')\n2. NAD nodes: Subtitle changed from 'NAD' to 'NetworkAttachmentDefinition' (for both attachment and nad types)\n3. Bridge Mapping nodes: \n   - Subtitle changed from 'OVN Localnet' to 'OVN Bridge Mapping'\n   - Details tab now lists all CUDNs that reference the bridge mapping (via physicalNetworkName)\n   - Shows 'No CUDNs reference this bridge mapping' when none exist\nAll changes verified with successful build","created_at":"2026-01-08T00:03:51Z"},{"id":5,"issue_id":"ovn-recon-cgg","author":"dale","text":"✅ FIXED: All issues resolved:\n1. Graph nodes now show abbreviations (CUDN, NAD) instead of verbose names in graph columns\n2. Drawer headers still show verbose names (e.g., 'Localnet ClusterUserDefinedNetwork') as desired\n3. Bridge Mapping details tab CUDN references are now hyperlinked to console resource views\n4. Added graphDisplayLabel field to NodeViewModel to separate graph display from drawer subtitle\n5. All changes verified with successful build","created_at":"2026-01-08T00:12:54Z"}]}
{"id":"ovn-recon-dd7","title":"Improve OVS Interface Handling and Display","description":"Improve the handling and display of ovs-interfaces to reduce redundancy and improve clarity.\n\nCurrent Problem:\n- Both 'br-ex' ovs-bridge and 'br-ex' ovs-interface are appearing in the Bridges column\n- This creates visual redundancy and clutter\n- Users may not need to see the ovs-interface separately if its information can be consolidated\n\nProposed Solution (to be determined):\n- Investigate gathering details and metadata from ovs-interfaces\n- Display this information on the corresponding ovs-bridge node instead\n- Omit the ovs-interface from display (or move it to a different location)\n- This would consolidate related information and reduce visual clutter\n\nImplementation considerations:\n- Need to identify the relationship between ovs-bridge and ovs-interface (likely by name matching)\n- Extract relevant metadata/details from ovs-interface\n- Display this information in the bridge node's details/popover\n- Filter out ovs-interfaces from the Bridges column (or handle them differently)\n- Ensure no information is lost in the consolidation\n\nOpen questions:\n- What metadata/details from ovs-interface should be displayed on the bridge?\n- Should ovs-interfaces be completely hidden or moved to a different column?\n- How to handle cases where an ovs-interface exists without a corresponding bridge?\n- Should this apply to all ovs-interfaces or only those matching bridge names?","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T20:45:18.92961-08:00","created_by":"dale","updated_at":"2026-01-05T20:45:18.92961-08:00"}
{"id":"ovn-recon-knq","title":"Render inline YAML on graph node popups","description":"Render actual YAML content inline on graph node popups instead of just providing a link. Re-use the existing YAML view component from the OpenShift console SDK if available.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T10:58:10.307705-08:00","created_by":"dale","updated_at":"2026-01-07T14:07:00.479062-08:00","closed_at":"2026-01-07T14:07:00.479062-08:00","close_reason":"Closed"}
{"id":"ovn-recon-l2n","title":"Redesign Initial View and Header","description":"Redesign the initial view of the OVN Recon plugin to improve branding, space utilization, and navigation clarity.\n\n**Current Shortcomings:**\n1. Header shows 'Node Network State' with no indication that this is the OVN Recon plugin\n   - Users may not realize they're in a plugin context\n   - Missing plugin branding/identity\n\n2. View toggles take up too much vertical space within the diagram\n   - Toggles (e.g., 'Show hidden columns', 'Show Net Attach Defs') consume valuable diagram space\n   - Reduces available area for the network visualization\n   - Should be more compact or repositioned\n\n3. Breadcrumb view implies navigation via NodeNetworkState\n   - Current breadcrumb suggests users arrived from NodeNetworkState resource\n   - Should instead be a simple link to NodeNetworkState (if needed)\n   - Or remove breadcrumb entirely if not necessary for navigation\n\n4. No way to switch between different hosts/nodes\n   - Currently only shows one NodeNetworkState at a time\n   - Users must navigate back to list to select a different host\n   - Should be able to switch hosts directly from the visualization view\n\n**Proposed Solutions:**\n1. Update header to clearly indicate OVN Recon plugin\n   - Add plugin name/branding to header\n   - Consider: 'OVN Recon - Network Topology' or similar\n   - Ensure it's clear this is a plugin view\n   - Consider adding operator logo to left of header.\n\n2. Optimize toggle placement and design\n   - Move toggles to a more compact location (e.g., top toolbar, side panel, or inline with header)\n   - Consider horizontal layout instead of vertical\n   - Use icon buttons or compact toggle switches\n   - Reduce vertical space consumption\n\n3. Redesign breadcrumb/navigation\n   - Remove breadcrumb if not needed for navigation\n   - Or replace with a simple link to NodeNetworkState resource\n   - Ensure navigation doesn't imply a specific entry point\n\n4. Add host/node selector dropdown\n   - Add dropdown in NodeVisualization component (or header area) listing all available NodeNetworkState resources\n   - Dropdown should show host/node names (metadata.name from NodeNetworkState)\n   - Selecting a different host should update the graph context to show that host's network topology\n   - Should fetch all NodeNetworkState resources and allow switching between them\n   - Consider URL parameter or state management for selected host\n\n**Implementation considerations:**\n- Review current header implementation in NodeNetworkStateDetails component\n- Assess toggle component placement and styling\n- Evaluate breadcrumb necessity and redesign options\n- Add useK8sWatchResource to fetch all NodeNetworkState resources for dropdown\n- Update NodeVisualization to accept selected host name and update graph accordingly\n- Consider URL routing or state management for host selection persistence\n- Ensure changes maintain accessibility and usability\n- Consider overall plugin branding and user experience","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T11:25:12.322879-08:00","created_by":"dale","updated_at":"2026-01-08T16:42:00.915499-08:00","closed_at":"2026-01-08T16:42:00.915499-08:00","close_reason":"Closed","comments":[{"id":6,"issue_id":"ovn-recon-l2n","author":"dale","text":"✅ Shortcoming #1 FIXED: Updated headers to include OVN Recon branding:\n- NodeVisualization.tsx: Changed 'Network Topology Visualization' to 'OVN Recon - Network Topology'\n- NodeNetworkStateList.tsx: Changed 'Node Network State' to 'OVN Recon - Node Network State'\n- Both empty state and main view headers updated\n- Build successful","created_at":"2026-01-08T23:35:42Z"},{"id":7,"issue_id":"ovn-recon-l2n","author":"dale","text":"✅ Shortcoming #2 FIXED: Optimized toggle and zoom control placement:\n- Toggles now displayed horizontally on same line using Flex layout (reduced vertical space)\n- Pan/zoom controls moved below the diagram (better space utilization)\n- Build successful","created_at":"2026-01-08T23:45:14Z"},{"id":8,"issue_id":"ovn-recon-l2n","author":"dale","text":"✅ Shortcoming #3 FIXED: Updated NodeNetworkStateList page:\n- Changed heading from 'OVN Recon - Node Network State' to 'OVN Recon - Nodes'\n- Updated Helmet title to match\n- Added 'View Node Topology' header inside the card above the list\n- Removed 'Created' column from the table\n- Updated colSpan values for loading/error states (from 2 to 1)\n- Build successful","created_at":"2026-01-09T00:05:14Z"},{"id":9,"issue_id":"ovn-recon-l2n","author":"dale","text":"✅ Shortcoming #4 FIXED: Added host selector dropdown:\n- Added FormSelect dropdown to the left of toggle controls\n- Fetches all NodeNetworkState resources using useK8sWatchResource\n- Dropdown displays all available hosts/nodes\n- Selecting a host navigates to that host's topology view\n- Positioned inline with toggle controls using Flex layout\n- Uses React Router v5 useHistory for navigation\n- Build successful","created_at":"2026-01-09T00:21:13Z"},{"id":10,"issue_id":"ovn-recon-l2n","author":"dale","text":"✅ Shortcoming #3 breadcrumb FIXED: Updated breadcrumb and heading:\n- Breadcrumb root changed from 'Node Network State' to 'OVN Recon'\n- Heading changed from 'Node Network State: {displayName}' to 'Node Network Topology: {displayName}'\n- Build successful","created_at":"2026-01-09T00:38:10Z"}]}
{"id":"ovn-recon-n5c","title":"Rethink Gravity Algorithm for Edge Crossing Minimization","description":"Redesign the gravity calculation algorithm to minimize edge crossings in the graph visualization.\n\nCurrent Problem:\n- Current gravity is based on connection count, which doesn't consider visual layout\n- Nodes in connected paths (e.g., ens192 -\u003e br-ex -\u003e physnet -\u003e machinenet CUDN -\u003e machinenet NAD) should be aligned vertically at the top of their respective columns\n- This will prevent edges from crossing other edges\n\nProposed Solution:\n1. Identify connected paths/chains through the graph (especially primary/long paths)\n2. Assign lower gravity (higher priority) to nodes that are part of longer connected paths\n3. Use a path-aware algorithm that considers:\n   - Path length (longer paths get priority)\n   - Position in path (earlier nodes in path get priority)\n   - Or use a topological sort that considers graph structure\n\nImplementation approach:\n- Build a graph representation of all connections\n- Identify primary paths (longest paths, or paths with most connections)\n- Calculate path-based gravity: nodes in longer paths get lower gravity\n- Fallback to connection-count gravity for nodes not in identified paths\n- Ensure nodes in the same path align vertically (same Y position across columns)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T20:22:40.711942-08:00","created_by":"dale","updated_at":"2026-01-07T10:54:06.128329-08:00","closed_at":"2026-01-07T10:54:06.128329-08:00","close_reason":"Closed"}
{"id":"ovn-recon-qpv","title":"Gravity sorting\n","description":"Add gravity score to graph nodes to enable sorting of columns.\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T19:37:18.735526-08:00","created_by":"dale","updated_at":"2026-01-05T19:40:23.727711-08:00"}
{"id":"ovn-recon-x7x","title":"Enhance Gravity Sort","description":"Enhance gravity sorting to favor bridge 'br-ex' and bridge mappings by decrementing their gravity scores by 1. This will prioritize these nodes in the sorted display.\n\nImplementation details:\n- Decrement gravity by 1 for bridge 'br-ex' (lower gravity = higher priority)\n- Decrement gravity by 1 for all bridge mappings (lower gravity = higher priority)\n- This should be applied after the initial gravity calculation but before sorting","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T19:49:29.06085-08:00","created_by":"dale","updated_at":"2026-01-05T19:51:48.407912-08:00","closed_at":"2026-01-05T19:51:48.407912-08:00","close_reason":"Closed"}
